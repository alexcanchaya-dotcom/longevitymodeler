<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Longevity Calculator</title>
  <style>
    :root {
      --bg-start: #3d1c5b;
      --bg-end: #1a73e8;
      --card-bg: rgba(255, 255, 255, 0.12);
      --card-border: rgba(255, 255, 255, 0.25);
      --text-primary: #f5f7ff;
      --text-secondary: #d6dbf5;
      --accent: #5e8bfd;
      --accent-strong: #4a7de8;
      --shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.05), transparent 25%),
                  radial-gradient(circle at 80% 10%, rgba(255,255,255,0.08), transparent 22%),
                  linear-gradient(135deg, var(--bg-start), var(--bg-end));
      color: var(--text-primary);
      display: flex;
      justify-content: center;
      padding: 32px 16px 48px;
    }

    .container {
      width: 100%;
      max-width: 1200px;
      background: linear-gradient(160deg, rgba(255,255,255,0.18), rgba(255,255,255,0.08));
      border: 1px solid var(--card-border);
      border-radius: 20px;
      padding: clamp(18px, 3vw, 32px);
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
    }

    header {
      text-align: center;
      margin-bottom: 28px;
    }

    h1 {
      margin: 0;
      font-size: clamp(28px, 3vw, 38px);
      letter-spacing: 0.5px;
    }

    p.lead {
      margin: 10px 0 0;
      color: var(--text-secondary);
      font-size: 15px;
    }

    .top-note {
      margin: 6px 0 0;
      font-size: 13px;
      color: #fcd6a6;
    }

    .top-note a {
      color: #ffd59f;
      font-weight: 700;
      text-decoration: none;
    }

    .top-note a:hover {
      text-decoration: underline;
    }

    .section-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 18px;
    }

    .section {
      border: 1px solid var(--card-border);
      border-radius: 16px;
      padding: 18px 16px 14px;
      background: var(--card-bg);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.15);
    }

    .section h2 {
      margin: 0 0 14px;
      font-size: 18px;
      letter-spacing: 0.3px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .inputs-grid {
      display: grid;
      gap: 12px;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      align-items: end;
    }

    label {
      display: block;
      font-size: 13px;
      margin-bottom: 6px;
      color: var(--text-secondary);
    }

    input[type="number"],
    select {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.25);
      background: rgba(255,255,255,0.08);
      color: #fff;
      font-size: 14px;
      outline: none;
      transition: border 0.2s ease, background 0.2s ease, transform 0.1s ease;
    }

    select option {
      color: #000000 !important;
      background-color: #ffffff !important;
    }

    input[type="number"]:focus,
    select:focus {
      border-color: rgba(255,255,255,0.55);
      background: rgba(255,255,255,0.12);
      transform: translateY(-1px);
    }

    .radio-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 10px;
    }

    .radio-group label {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 12px;
      border: 1px solid rgba(255,255,255,0.25);
      background: rgba(255,255,255,0.05);
      border-radius: 10px;
      cursor: pointer;
      color: var(--text-primary);
      justify-content: center;
      transition: border 0.2s ease, background 0.2s ease;
      font-weight: 600;
    }

    .radio-group input { accent-color: var(--accent); }

    .radio-group label:hover {
      border-color: rgba(255,255,255,0.6);
      background: rgba(255,255,255,0.12);
    }

    .button-row {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 16px;
    }

    .action-button {
      width: min(360px, 100%);
      padding: 14px 16px;
      border: none;
      border-radius: 14px;
      font-size: 18px;
      font-weight: 700;
      color: #fff;
      background: linear-gradient(135deg, #5e8bfd, #4478f1);
      box-shadow: 0 12px 24px rgba(68, 120, 241, 0.35);
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .action-button:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 28px rgba(68, 120, 241, 0.45);
    }

    .action-button:active { transform: translateY(0); }

    #calculate { display: inline-block; }

    #reset {
      background: linear-gradient(135deg, #8a9ccf, #6d7fb8);
      box-shadow: 0 12px 24px rgba(109, 127, 184, 0.35);
    }

    .results-wrapper {
      margin-top: 24px;
      display: none;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.35s ease, transform 0.35s ease;
    }

    .results-wrapper.visible {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    .result-card {
      padding: 18px 16px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.25);
      background: linear-gradient(180deg, rgba(255,255,255,0.2), rgba(255,255,255,0.08));
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.2);
    }

    .lifespan-value {
      font-size: clamp(34px, 4vw, 44px);
      font-weight: 800;
      letter-spacing: 0.5px;
      margin: 6px 0 4px;
      color: #ffffff;
    }

    .result-subtitle {
      color: var(--text-secondary);
      margin: 0 0 6px;
      font-size: 14px;
    }

    .impact-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 12px;
      margin-top: 14px;
    }

    .impact-card {
      padding: 12px;
      border-radius: 12px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.15);
    }

    .impact-card h3 {
      margin: 0 0 6px;
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .impact-value {
      font-weight: 700;
      color: #fff;
    }

    .progress-container {
      width: 100%;
      height: 8px;
      border-radius: 999px;
      background: rgba(255,255,255,0.12);
      overflow: hidden;
      margin-top: 8px;
    }

    .progress-bar {
      height: 100%;
      border-radius: inherit;
      background: linear-gradient(90deg, #5e8bfd, #81a4ff);
      width: 0%;
      transition: width 0.3s ease;
    }

    .recommendations {
      margin-top: 16px;
      border-top: 1px solid rgba(255,255,255,0.15);
      padding-top: 12px;
    }

    .recommendations h3 {
      margin: 0 0 10px;
      font-size: 15px;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 10px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 999px;
      margin: 4px 6px 4px 0;
      font-size: 13px;
    }

    .lifespan-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: baseline;
      margin-bottom: 8px;
    }

    .remaining-years {
      color: var(--text-secondary);
      font-size: 14px;
    }

    .disclaimer {
      margin-top: 12px;
      font-size: 12px;
      color: #fcd6a6;
      line-height: 1.5;
      display: flex;
      gap: 8px;
      align-items: flex-start;
    }

    .disclaimer-section {
      margin-top: 28px;
      padding: 18px 16px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.25);
      background: rgba(255, 255, 255, 0.1);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.2);
    }

    .disclaimer-section h2 {
      margin: 0 0 12px;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .disclaimer-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 12px;
    }

    .disclaimer-block {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      padding: 12px 14px;
    }

    .disclaimer-block h3 {
      margin: 0 0 8px;
      font-size: 15px;
    }

    .disclaimer-block ul {
      margin: 0;
      padding-left: 18px;
      color: var(--text-secondary);
      line-height: 1.55;
      font-size: 13px;
    }

    @media (max-width: 640px) {
      body { padding: 18px 10px 24px; }
      .container { padding: 14px 12px; }
      .section-grid { grid-template-columns: 1fr; }
      .inputs-grid { grid-template-columns: 1fr; }
      .radio-group { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Longevity & Vitality Insights</h1>
      <p class="lead">Comprehensive, science-informed estimator highlighting modifiable factors that influence lifespan.</p>
      <p class="top-note">For educational purposes only ‚Äî <a href="#disclaimer">review important disclaimers</a>.</p>
    </header>

    <div class="section-grid">
      <section class="section">
        <h2>üßë Basic Demographics</h2>
        <div class="inputs-grid">
          <div>
            <label for="age">Age (18-100)</label>
            <input type="number" id="age" min="18" max="100" value="35">
          </div>
          <div>
            <label>Gender</label>
            <div class="radio-group">
              <label><input type="radio" name="gender" value="male" checked> Male</label>
              <label><input type="radio" name="gender" value="female"> Female</label>
            </div>
          </div>
          <div>
            <label for="height">Height (cm)</label>
            <input type="number" id="height" min="120" max="230" value="175">
          </div>
          <div>
            <label for="weight">Weight (kg)</label>
            <input type="number" id="weight" min="35" max="200" value="72">
          </div>
        </div>
      </section>

      <section class="section">
        <h2>üèÉ Physical Activity</h2>
        <div class="inputs-grid">
          <div>
            <label for="cardio">Cardio exercise frequency</label>
            <select id="cardio">
              <option>Never</option>
              <option>1-2x/week</option>
              <option selected>3-4x/week</option>
              <option>5+x/week</option>
            </select>
          </div>
          <div>
            <label for="strength">Strength training frequency</label>
            <select id="strength">
              <option>Never</option>
              <option>1-2x/week</option>
              <option selected>3-4x/week</option>
              <option>5+x/week</option>
            </select>
          </div>
          <div>
            <label for="steps">Daily steps average</label>
            <select id="steps">
              <option>&lt;5000</option>
              <option>5000-8000</option>
              <option selected>8000-10000</option>
              <option>10000+</option>
            </select>
          </div>
          <div>
            <label for="sauna">Sauna usage</label>
            <select id="sauna">
              <option>Never</option>
              <option>1x/week</option>
              <option selected>2-3x/week</option>
              <option>4+x/week</option>
            </select>
          </div>
        </div>
      </section>

      <section class="section">
        <h2>ü•ó Nutrition & Diet</h2>
        <div class="inputs-grid">
          <div>
            <label for="diet">Diet type</label>
            <select id="diet">
              <option>Standard</option>
              <option>Balanced/Whole foods</option>
              <option>Mediterranean</option>
              <option>Vegetarian/Vegan</option>
              <option>Keto/Low-carb</option>
            </select>
          </div>
          <div>
            <label for="vegetables">Daily vegetable servings</label>
            <select id="vegetables">
              <option>&lt;2</option>
              <option>2-3</option>
              <option selected>4-5</option>
              <option>6+</option>
            </select>
          </div>
          <div>
            <label for="processed">Ultra-processed foods consumption</label>
            <select id="processed">
              <option>Daily</option>
              <option>Several times/week</option>
              <option selected>Rarely</option>
              <option>Never</option>
            </select>
          </div>
          <div>
            <label for="water">Water intake</label>
            <select id="water">
              <option>&lt;4 cups</option>
              <option>4-6 cups</option>
              <option>6-8 cups</option>
              <option selected>8+ cups</option>
            </select>
          </div>
          <div>
            <label for="fish">Fish consumption</label>
            <select id="fish">
              <option>Never</option>
              <option selected>1x/week</option>
              <option>2-3x/week</option>
              <option>4+x/week</option>
            </select>
          </div>
        </div>
      </section>

      <section class="section">
        <h2>üò¥ Sleep & Recovery</h2>
        <div class="inputs-grid">
          <div>
            <label for="sleepHours">Sleep hours (4-12)</label>
            <input type="number" id="sleepHours" min="4" max="12" value="7.5" step="0.5">
          </div>
          <div>
            <label for="sleepQuality">Sleep quality</label>
            <select id="sleepQuality">
              <option>Poor</option>
              <option>Fair</option>
              <option selected>Good</option>
              <option>Excellent</option>
            </select>
          </div>
          <div>
            <label for="sleepConsistency">Sleep schedule consistency</label>
            <select id="sleepConsistency">
              <option>Very irregular</option>
              <option>Somewhat irregular</option>
              <option selected>Mostly consistent</option>
              <option>Very consistent</option>
            </select>
          </div>
        </div>
      </section>

      <section class="section">
        <h2>üåø Lifestyle & Habits</h2>
        <div class="inputs-grid">
          <div>
            <label for="smoking">Smoking status</label>
            <select id="smoking">
              <option selected>Never</option>
              <option>Former (5+ years)</option>
              <option>Former (&lt;5 years)</option>
              <option>Current</option>
            </select>
          </div>
          <div>
            <label for="alcohol">Alcohol consumption</label>
            <select id="alcohol">
              <option>None</option>
              <option selected>Light (1-7/week)</option>
              <option>Moderate (8-14/week)</option>
              <option>Heavy (15+/week)</option>
            </select>
          </div>
          <div>
            <label for="stress">Stress level</label>
            <select id="stress">
              <option>Very high</option>
              <option>High</option>
              <option selected>Moderate</option>
              <option>Low</option>
              <option>Very low</option>
            </select>
          </div>
          <div>
            <label for="social">Social connections</label>
            <select id="social">
              <option>Isolated</option>
              <option>Few friends</option>
              <option selected>Moderate social life</option>
              <option>Very social</option>
            </select>
          </div>
        </div>
      </section>

      <section class="section">
        <h2>üßò Wellness Practices</h2>
        <div class="inputs-grid">
          <div>
            <label for="meditation">Meditation / mindfulness</label>
            <select id="meditation">
              <option>Never</option>
              <option>Occasionally</option>
              <option>Weekly</option>
              <option selected>Daily</option>
            </select>
          </div>
          <div>
            <label for="nature">Time in nature</label>
            <select id="nature">
              <option>Rarely</option>
              <option>Monthly</option>
              <option selected>Weekly</option>
              <option>Daily</option>
            </select>
          </div>
          <div>
            <label for="sun">Sun exposure</label>
            <select id="sun">
              <option>Minimal</option>
              <option>Moderate with sunscreen</option>
              <option>Moderate without sunscreen</option>
              <option>Excessive</option>
            </select>
          </div>
        </div>
      </section>

      <section class="section">
        <h2>üè• Health Management</h2>
        <div class="inputs-grid">
          <div>
            <label for="checkups">Medical checkups</label>
            <select id="checkups">
              <option>Never</option>
              <option>Every 2+ years</option>
              <option selected>Annually</option>
              <option>Every 6 months</option>
            </select>
          </div>
          <div>
            <label for="conditions">Chronic conditions</label>
            <select id="conditions">
              <option>None</option>
              <option>1 condition</option>
              <option>2-3 conditions</option>
              <option>4+ conditions</option>
            </select>
          </div>
          <div>
            <label for="family">Family longevity history</label>
            <select id="family">
              <option>Poor (&lt;70 avg)</option>
              <option>Fair (70-80 avg)</option>
              <option>Good (80-85 avg)</option>
              <option selected>Excellent (85+ avg)</option>
            </select>
          </div>
        </div>
      </section>

      <section class="section">
        <h2>üåê Socioeconomic Factors</h2>
        <div class="inputs-grid">
          <div>
            <label for="education">Education level</label>
            <select id="education">
              <option>Less than high school</option>
              <option>High school</option>
              <option>Some college</option>
              <option>Bachelor's degree</option>
              <option selected>Graduate degree</option>
            </select>
          </div>
          <div>
            <label for="marital">Marital status</label>
            <select id="marital">
              <option>Single/Never married</option>
              <option selected>Married/Partnered</option>
              <option>Divorced/Separated</option>
              <option>Widowed</option>
            </select>
          </div>
          <div>
            <label for="income">Income level</label>
            <select id="income">
              <option>Below poverty line</option>
              <option>Lower middle class</option>
              <option selected>Middle class</option>
              <option>Upper middle class</option>
              <option>High income</option>
            </select>
          </div>
        </div>
      </section>

      <section class="section">
        <h2>ü©∫ Medical Preconditions</h2>
        <div class="inputs-grid">
          <div>
            <label>History of heart disease</label>
            <div class="radio-group">
              <label><input type="radio" name="heart" value="no" checked> No</label>
              <label><input type="radio" name="heart" value="yes"> Yes</label>
            </div>
          </div>
          <div>
            <label>History of cancer</label>
            <div class="radio-group">
              <label><input type="radio" name="cancer" value="no" checked> No</label>
              <label><input type="radio" name="cancer" value="yes"> Yes</label>
            </div>
          </div>
          <div>
            <label for="diabetes">Diabetes</label>
            <select id="diabetes">
              <option>None</option>
              <option>Pre-diabetic</option>
              <option>Type 1</option>
              <option>Type 2 controlled</option>
              <option>Type 2 uncontrolled</option>
            </select>
          </div>
          <div>
            <label for="bp">High blood pressure</label>
            <select id="bp">
              <option>Normal</option>
              <option>Elevated</option>
              <option>Stage 1</option>
              <option>Stage 2</option>
            </select>
          </div>
          <div>
            <label for="mentalHealth">Mental health conditions</label>
            <select id="mentalHealth">
              <option>None</option>
              <option>Mild anxiety/depression</option>
              <option>Moderate</option>
              <option>Severe</option>
            </select>
          </div>
        </div>
      </section>
    </div>

    <div class="button-row">
      <button id="calculate" class="action-button">Calculate Longevity Insights</button>
      <button id="reset" class="action-button">Reset Form</button>
    </div>

    <div class="results-wrapper" id="results">
      <div class="result-card">
        <div class="lifespan-row">
          <div>
            <div class="result-subtitle">Estimated lifespan</div>
            <div class="lifespan-value" id="lifespanValue">-- years</div>
          </div>
          <div class="remaining-years" id="remainingYears"></div>
        </div>
        <div class="result-subtitle" id="encouragement">Your lifestyle choices can meaningfully shift this estimate.</div>

        <div class="impact-grid" id="impactGrid"></div>

        <div class="recommendations">
          <h3>Top opportunities to improve</h3>
          <div id="recommendationChips"></div>
        </div>

        <div class="disclaimer">
          <span>‚ö†Ô∏è</span>
          <span>This calculator is for informational and educational purposes only and does not provide medical advice. Consult qualified healthcare professionals for personal recommendations. See the full disclaimers below.</span>
        </div>
      </div>
    </div>

    <div class="disclaimer-section" id="disclaimer">
      <h2>‚ö†Ô∏è Important Disclaimers</h2>
      <div class="disclaimer-grid">
        <div class="disclaimer-block">
          <h3>Medical Disclaimer</h3>
          <ul>
            <li>This calculator provides estimates for informational and educational purposes only.</li>
            <li>Results are not medical advice, diagnosis, or treatment recommendations.</li>
            <li>Do not use this calculator as a substitute for professional medical advice.</li>
            <li>Always consult with qualified healthcare providers for medical decisions.</li>
            <li>Individual results may vary significantly based on many factors.</li>
          </ul>
        </div>
        <div class="disclaimer-block">
          <h3>Accuracy Disclaimer</h3>
          <ul>
            <li>Estimates are based on statistical models and research data.</li>
            <li>No guarantee of accuracy or specific outcomes.</li>
            <li>Many factors affecting longevity cannot be fully captured.</li>
          </ul>
        </div>
        <div class="disclaimer-block">
          <h3>Liability Disclaimer</h3>
          <ul>
            <li>Website owners assume no liability for decisions made based on calculator results.</li>
            <li>Users assume all risks associated with using this information.</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    const optionValues = {
      cardio: { 'Never': 0, '1-2x/week': 1, '3-4x/week': 2, '5+x/week': 3 },
      strength: { 'Never': 0, '1-2x/week': 1, '3-4x/week': 2, '5+x/week': 3 },
      steps: { '<5000': 0, '5000-8000': 1, '8000-10000': 2, '10000+': 3 },
      sauna: { 'Never': 0, '1x/week': 1, '2-3x/week': 2, '4+x/week': 3 },
      diet: { 'Standard': 0, 'Balanced/Whole foods': 1, 'Mediterranean': 1.2, 'Vegetarian/Vegan': 1, 'Keto/Low-carb': 0.5 },
      vegetables: { '<2': 0, '2-3': 0.3, '4-5': 0.6, '6+': 0.8 },
      processed: { 'Daily': -1, 'Several times/week': -0.5, 'Rarely': 0.35, 'Never': 0.5 },
      water: { '<4 cups': -0.4, '4-6 cups': 0, '6-8 cups': 0.2, '8+ cups': 0.35 },
      fish: { 'Never': 0, '1x/week': 0.25, '2-3x/week': 0.4, '4+x/week': 0.5 },
      sleepQuality: { 'Poor': 0, 'Fair': 0.4, 'Good': 0.8, 'Excellent': 0.8 },
      sleepConsistency: { 'Very irregular': 0, 'Somewhat irregular': 0.4, 'Mostly consistent': 0.8, 'Very consistent': 0.8 },
      smoking: { 'Current': -8, 'Former (5+ years)': -2.5, 'Former (<5 years)': -4.5, 'Never': 0 },
      alcohol: { 'None': 0.8, 'Light (1-7/week)': 0.8, 'Moderate (8-14/week)': -0.4, 'Heavy (15+/week)': -1.8 },
      stress: { 'Very high': -3, 'High': -2, 'Moderate': 0, 'Low': 0.8, 'Very low': 1.5 },
      social: { 'Isolated': -1, 'Few friends': 0, 'Moderate social life': 1, 'Very social': 2 },
      meditation: { 'Never': 0, 'Occasionally': 0.2, 'Weekly': 0.35, 'Daily': 0.6 },
      nature: { 'Rarely': 0, 'Monthly': 0.2, 'Weekly': 0.35, 'Daily': 0.35 },
      sun: { 'Minimal': 0, 'Moderate with sunscreen': 0.35, 'Moderate without sunscreen': 0.35, 'Excessive': -0.5 },
      checkups: { 'Never': 0, 'Every 2+ years': 0.2, 'Annually': 0.5, 'Every 6 months': 0.7 },
      conditions: { 'None': 0, '1 condition': -1, '2-3 conditions': -1.5, '4+ conditions': -2 },
      family: { 'Poor (<70 avg)': -5, 'Fair (70-80 avg)': -1, 'Good (80-85 avg)': 1, 'Excellent (85+ avg)': 4 },
      education: { 'Less than high school': -2, 'High school': 0, 'Some college': 0.8, 'Bachelor\'s degree': 1.5, 'Graduate degree': 2.2 },
      marital: { 'Single/Never married': -0.8, 'Married/Partnered': 1.5, 'Divorced/Separated': -0.4, 'Widowed': 0 },
      income: { 'Below poverty line': -3, 'Lower middle class': -1, 'Middle class': 0, 'Upper middle class': 0.8, 'High income': 1.5 },
      diabetes: { 'None': 0, 'Pre-diabetic': -1, 'Type 1': -2, 'Type 2 controlled': -1.5, 'Type 2 uncontrolled': -4 },
      bp: { 'Normal': 0, 'Elevated': -0.5, 'Stage 1': -1.5, 'Stage 2': -3 },
      mentalHealth: { 'None': 0, 'Mild anxiety/depression': -0.5, 'Moderate': -1.5, 'Severe': -3 }
    };

    const DEFAULT_INPUTS = {
      age: 35,
      gender: 'male',
      height: 175,
      weight: 72,
      sleepHours: 7.5,
      heart: 'no',
      cancer: 'no'
    };

    const DEFAULT_ENCOURAGEMENT = 'Your lifestyle choices can meaningfully shift this estimate.';

    const BONUS_SCALING = 0.45;

    const categoryWeights = {
      activity: { max: 2.7, keys: ['cardio', 'strength', 'steps', 'sauna'], labels: 'Physical activity' },
      nutrition: { max: 2.25, keys: ['diet', 'vegetables', 'processed', 'water', 'fish'], labels: 'Nutrition' },
      sleep: { max: 1.35, keys: ['sleepHours', 'sleepQuality', 'sleepConsistency'], labels: 'Sleep & Recovery' },
      lifestyle: { max: 2.7, keys: ['smoking', 'alcohol', 'stress', 'social'], labels: 'Lifestyle & Habits' },
      wellness: { max: 0.9, keys: ['meditation', 'nature', 'sun'], labels: 'Wellness Practices' },
      management: { max: 1.35, keys: ['checkups', 'conditions', 'family'], labels: 'Health Management' },
      socioeconomic: { max: 2.25, keys: ['education', 'marital', 'income'], labels: 'Socioeconomic' },
      medical: { max: 10, keys: ['heart', 'cancer', 'diabetes', 'bp', 'mentalHealth'], labels: 'Medical Preconditions' }
    };

    const impactDescriptors = {
      activity: 'Move regularly with cardio, resistance training, and daily steps while adding heat exposure like sauna.',
      nutrition: 'Favor whole foods, fiber, hydration, and omega-3 rich fish while minimizing processed items.',
      sleep: 'Aim for consistent, quality sleep in a quiet, dark environment.',
      lifestyle: 'Eliminate smoking, moderate alcohol, manage stress, and nurture social ties.',
      wellness: 'Layer in mindfulness, nature time, and sensible sun habits.',
      management: 'Stay proactive with checkups and condition management, leveraging family history awareness.',
      socioeconomic: 'Education, stable relationships, and financial security often support healthier choices and access.',
      medical: 'Work closely with clinicians to manage or mitigate existing conditions.'
    };

    const recommendationLabels = {
      cardio: 'Increase cardio frequency',
      strength: 'Add more strength sessions',
      steps: 'Increase daily steps',
      sauna: 'Include sauna sessions',
      diet: 'Shift toward Mediterranean/whole foods',
      vegetables: 'Boost vegetable servings',
      processed: 'Reduce processed foods',
      water: 'Improve hydration',
      fish: 'Add omega-3 rich fish',
      sleepHours: 'Optimize sleep duration',
      sleepQuality: 'Improve sleep quality',
      sleepConsistency: 'Keep sleep schedule regular',
      smoking: 'Eliminate smoking',
      alcohol: 'Moderate alcohol',
      stress: 'Lower stress levels',
      social: 'Strengthen social connections',
      meditation: 'Practice mindfulness',
      nature: 'Spend time in nature',
      sun: 'Favor moderate sun with protection',
      checkups: 'Increase medical checkups',
      conditions: 'Better manage chronic conditions',
      family: 'Factor family history into choices',
      education: 'Pursue additional education/skills',
      marital: 'Cultivate supportive partnerships',
      income: 'Improve financial stability/access',
      heart: 'Address heart disease risk',
      cancer: 'Address cancer risk factors',
      diabetes: 'Improve diabetes control',
      bp: 'Control blood pressure',
      mentalHealth: 'Support mental health'
    };

    function getNumericValue(id) {
      const el = document.getElementById(id);
      if (!el) return 0;

      if (el.type === 'number') {
        const val = parseFloat(el.value);
        return isFinite(val) ? val : 0;
      }

      if (el.tagName === 'SELECT') {
        const text = el.value;
        return optionValues[id]?.[text] ?? 0;
      }

      return 0;
    }

    function applyBonusScaling(impacts) {
      const scaled = {};
      Object.entries(impacts).forEach(([key, value]) => {
        scaled[key] = value > 0 ? value * BONUS_SCALING : value;
      });
      return scaled;
    }

    function sumAdjustment(impacts) {
      return Object.values(impacts).reduce((a, b) => a + b, 0);
    }

    function getRadioValue(name) {
      const selected = document.querySelector(`input[name="${name}"]:checked`);
      if (!selected) return 0;
      const key = name === 'heart' || name === 'cancer' ? name : selected.value;
      if (name === 'heart') return selected.value === 'yes' ? -3 : 0;
      if (name === 'cancer') return selected.value === 'yes' ? -2 : 0;
      return optionValues[name]?.[selected.value] ?? 0;
    }

    function calculateHoursScore(hours) {
      if (!isFinite(hours)) return 0;
      if (hours >= 7 && hours <= 9) return 1;
      if (hours >= 6 && hours < 7) return 0.5;
      if (hours > 9 && hours <= 10) return 0.25;
      return 0;
    }

    function clamp(value, min, max) {
      return Math.min(Math.max(value, min), max);
    }

    function normalize(value, max) {
      if (max === 0) return 0;
      return clamp((value / max) * 100, 0, 100);
    }

    function getBaseLifespan() {
      const gender = document.querySelector('input[name="gender"]:checked')?.value || 'male';
      return gender === 'female' ? 80 : 78;
    }

    function buildImpactCard(title, value, progress, descriptor) {
      const div = document.createElement('div');
      div.className = 'impact-card';

      const header = document.createElement('h3');
      header.textContent = title;

      const valueSpan = document.createElement('div');
      valueSpan.className = 'impact-value';
      valueSpan.textContent = `${value >= 0 ? '+' : ''}${value.toFixed(1)} yrs`;

      const progressContainer = document.createElement('div');
      progressContainer.className = 'progress-container';

      const progressBar = document.createElement('div');
      progressBar.className = 'progress-bar';
      progressBar.style.width = `${progress}%`;

      const descriptorText = document.createElement('div');
      descriptorText.className = 'result-subtitle';
      descriptorText.style.marginTop = '8px';
      descriptorText.textContent = descriptor;

      progressContainer.appendChild(progressBar);
      div.appendChild(header);
      div.appendChild(valueSpan);
      div.appendChild(progressContainer);
      div.appendChild(descriptorText);
      return div;
    }

    function collectInputs() {
      const radios = ['heart', 'cancer'];
      const selectKeys = [
        'cardio','strength','steps','sauna','diet','vegetables','processed','water','fish',
        'sleepQuality','sleepConsistency','smoking','alcohol','stress','social','meditation',
        'nature','sun','checkups','conditions','family','education','marital','income',
        'diabetes','bp','mentalHealth'
      ];
      const numbers = ['sleepHours'];

      const values = {};

      radios.forEach(key => { values[key] = getRadioValue(key); });
      selectKeys.forEach(key => { values[key] = getNumericValue(key); });
      numbers.forEach(key => { values[key] = getNumericValue(key); });

      values.sleepHoursScore = calculateHoursScore(values.sleepHours);
      return values;
    }

    function buildCategoryImpacts(values) {
      const impacts = {
        activity: clamp(
          (values.cardio * 2/3) +
          (values.strength * 2/3) +
          (values.steps * 0.25) +
          (values.sauna * 0.33),
          -6, 6),
        nutrition: clamp(
          (values.diet) +
          (values.vegetables) +
          (values.processed) +
          (values.water) +
          (values.fish),
          -5, 5),
        sleep: clamp(values.sleepHoursScore + values.sleepQuality + values.sleepConsistency, -3, 3),
        lifestyle: clamp(values.smoking + values.alcohol + values.stress + values.social, -10, 6),
        wellness: clamp(values.meditation + values.nature + values.sun, -1, 2),
        management: clamp(values.checkups + values.conditions + values.family, -5, 3),
        socioeconomic: clamp(values.education + values.marital + values.income, -5, 5),
        medical: clamp(values.heart + values.cancer + values.diabetes + values.bp + values.mentalHealth, -12, 0)
      };
      return impacts;
    }

    function calculateLifespan(options = {}) {
      const values = collectInputs();
      const base = getBaseLifespan();
      const impacts = applyBonusScaling(buildCategoryImpacts(values));

      const totalAdjustment = sumAdjustment(impacts);
      const lifespan = clamp(base + totalAdjustment, 40, 110);

      const age = getNumericValue('age');
      const remaining = isFinite(age) ? clamp(lifespan - age, -10, 90) : null;

      document.getElementById('lifespanValue').textContent = `${lifespan.toFixed(1)} years`;
      document.getElementById('remainingYears').textContent = isFinite(remaining)
        ? `${remaining.toFixed(1)} years ${remaining >= 0 ? 'remaining' : 'beyond current age'}`
        : '';

      document.getElementById('encouragement').textContent =
        totalAdjustment >= 0
          ? 'Great job! Your current habits are adding years‚Äîkeep them strong and refine the gaps.'
          : 'Your choices can add years‚Äîfocus on the biggest opportunities to improve your estimate.';

      buildImpactGrid(impacts);
      buildRecommendations(buildImprovements(values, impacts));
      renderResults(lifespan, remaining, impacts, options);
    }

    function buildImpactGrid(impacts) {
      const grid = document.getElementById('impactGrid');
      grid.innerHTML = '';

      Object.entries(categoryWeights).forEach(([key, meta]) => {
        const value = impacts[key] ?? 0;
        const progress = normalize(value, meta.max);
        grid.appendChild(buildImpactCard(meta.labels, value, progress, impactDescriptors[key]));
      });
    }

    function buildImprovements(values, impacts) {
      const improvements = [];

      const targetRanges = {
        cardio: 3, strength: 3, steps: 3, sauna: 3,
        diet: 1.2, vegetables: 0.8, processed: 0.5, water: 0.35, fish: 0.5,
        sleepHoursScore: 1, sleepQuality: 0.8, sleepConsistency: 0.8,
        smoking: 0, alcohol: 0.8, stress: 1.5, social: 2,
        meditation: 0.6, nature: 0.35, sun: 0.35,
        checkups: 0.7, conditions: 0, family: 4,
        education: 2.2, marital: 1.5, income: 1.5,
        heart: 0, cancer: 0, diabetes: 0, bp: 0, mentalHealth: 0
      };

      const currentScores = {
        ...values,
        sleepHours: undefined,
        heart: values.heart,
        cancer: values.cancer
      };

      Object.entries(targetRanges).forEach(([factor, target]) => {
        const current = currentScores[factor] ?? 0;
        const gap = target - current;
        const potentialGain = Math.max(0, gap);

        if (potentialGain > 0.15) {
          const limitedGain = Math.min(potentialGain, 3);
          const scaledGain = limitedGain * BONUS_SCALING;
          improvements.push({
            factor,
            potentialGain: scaledGain,
            category: Object.entries(categoryWeights).find(([, meta]) => meta.keys.includes(factor))?.[0]
          });
        }
      });

      improvements.sort((a, b) => b.potentialGain - a.potentialGain);
      return improvements.slice(0, 3);
    }

    function buildRecommendations(improvements) {
      const container = document.getElementById('recommendationChips');
      container.innerHTML = '';

      if (!improvements.length) {
        container.textContent = 'You are performing strongly across key areas‚Äîmaintain your habits!';
        return;
      }

      improvements.forEach(item => {
        const chip = document.createElement('div');
        chip.className = 'chip';
        chip.textContent = `${recommendationLabels[item.factor]} (+${item.potentialGain.toFixed(1)} yrs)`;
        container.appendChild(chip);
      });
    }

    function prepareImpactBreakdown(values) {
      const impacts = buildCategoryImpacts(values);
      return impacts;
    }

    function init() {
      // Placeholder for future initialization logic if needed
    }

    init();

    function recalcOnChange() {
      const resultWrapper = document.getElementById('results');
      if (resultWrapper.classList.contains('visible')) {
        calculateLifespan({ scrollToResults: false });
      }
    }

    document.querySelectorAll('input, select').forEach(el => {
      el.addEventListener('change', recalcOnChange);
      el.addEventListener('input', recalcOnChange);
    });

    function clearResultsDisplay() {
      const resultWrapper = document.getElementById('results');
      resultWrapper.classList.remove('visible');
      document.getElementById('lifespanValue').textContent = '-- years';
      document.getElementById('remainingYears').textContent = '';
      document.getElementById('encouragement').textContent = DEFAULT_ENCOURAGEMENT;
      document.getElementById('impactGrid').innerHTML = '';
      document.getElementById('recommendationChips').innerHTML = '';
    }

    function applyDefaults() {
      const radioDefaults = { heart: DEFAULT_INPUTS.heart, cancer: DEFAULT_INPUTS.cancer };
      Object.entries(radioDefaults).forEach(([name, value]) => {
        const radio = document.querySelector(`input[name="${name}"][value="${value}"]`);
        if (radio) radio.checked = true;
      });
    }

    applyDefaults();

    function resetForm() {
      clearResultsDisplay();

      document.getElementById('age').value = DEFAULT_INPUTS.age;
      document.getElementById('height').value = DEFAULT_INPUTS.height;
      document.getElementById('weight').value = DEFAULT_INPUTS.weight;
      document.getElementById('sleepHours').value = DEFAULT_INPUTS.sleepHours;

      document.querySelectorAll('select').forEach(select => {
        select.selectedIndex = 0;
      });

      const radioDefaults = {
        gender: DEFAULT_INPUTS.gender,
        heart: DEFAULT_INPUTS.heart,
        cancer: DEFAULT_INPUTS.cancer
      };

      Object.entries(radioDefaults).forEach(([name, value]) => {
        const radio = document.querySelector(`input[name="${name}"][value="${value}"]`);
        if (radio) radio.checked = true;
      });
    }

    function buildDiagnosis(values) {
      return {
        activity: values.cardio + values.strength + values.steps + values.sauna,
        nutrition: values.diet + values.vegetables + values.processed + values.water + values.fish,
        sleep: values.sleepHoursScore + values.sleepQuality + values.sleepConsistency,
        lifestyle: values.smoking + values.alcohol + values.stress + values.social,
        wellness: values.meditation + values.nature + values.sun,
        management: values.checkups + values.conditions + values.family,
        socioeconomic: values.education + values.marital + values.income,
        medical: values.heart + values.cancer + values.diabetes + values.bp + values.mentalHealth
      };
    }

    function calculateRemainingYears(lifespan, currentAge) {
      return clamp(lifespan - currentAge, -10, 90);
    }

    function calculateEncouragement(totalAdjustment) {
      return totalAdjustment >= 0
        ? 'Great job! Your current habits are adding years‚Äîkeep them strong and refine the gaps.'
        : 'Your choices can add years‚Äîfocus on the biggest opportunities to improve your estimate.';
    }

    function renderResults(lifespan, remaining, impacts, { scrollToResults = false } = {}) {
      document.getElementById('lifespanValue').textContent = `${lifespan.toFixed(1)} years`;
      document.getElementById('remainingYears').textContent = isFinite(remaining)
        ? `${remaining.toFixed(1)} years ${remaining >= 0 ? 'remaining' : 'beyond current age'}`
        : '';

      const totalAdjustment = sumAdjustment(impacts);
      document.getElementById('encouragement').textContent = calculateEncouragement(totalAdjustment);

      buildImpactGrid(impacts);
      buildRecommendations(buildImprovements(collectInputs(), impacts));

      const resultWrapper = document.getElementById('results');
      resultWrapper.classList.add('visible');
      if (scrollToResults) {
        resultWrapper.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    }

    document.getElementById('calculate').addEventListener('click', () => calculateLifespan({ scrollToResults: true }));
    document.getElementById('reset').addEventListener('click', resetForm);
  </script>
</body>
</html>
